#!/usr/bin/env rakudo

use lib 'lib';
use lib ".";
use Conf;
use plot;
use util;

sub MAIN($dirs, $op = 'mmx')
{
    my $conf     = Conf.new;
    my $mmx_copy = $conf.mmx_copy;
    my $mmx_sink = $conf.mmx_sink;
    my $mmx_host = $conf.mmx_host;

    if ($op ~~ 'mmx') {
       my $sname = $op ~ '_' ~ $dirs;
       qqx/tmux new -s $sname -d rakudo mmx_plotter.raku $dirs/;
    } elsif ($op ~~ 'copy') {
       my $sname = $op ~ '_' ~ $dirs;
       qqx/tmux new -s $sname -d rakudo mmx_copy.raku $dirs/;
    } elsif ($op ~~ 'sink') {
       my $sname = $op ~ '_' ~ $dirs;
       qqx/tmux new -s $sname -d rakudo $mmx_sink -d -t $mmx_host $dirs/;
    } else {
       say "wrong op type $op";
    }
}
